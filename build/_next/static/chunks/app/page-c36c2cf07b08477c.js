(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1421:function(e,t,n){Promise.resolve().then(n.bind(n,23))},23:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(9268),a=n(6006),o=n(4214);let l="http://localhost:3001/api/persons";var s={getAll:()=>{let e=o.Z.get(l);return e.then(e=>e.data)},create:e=>{let t=o.Z.post(l,e);return t.then(e=>e.data)},update:(e,t)=>{let n=o.Z.put("".concat(l,"/").concat(e),t);return n.then(e=>e.data)},removePerson:e=>{let t=o.Z.delete("".concat(l,"/").concat(e));return t.then(e=>e.data)}};let d=e=>{let{filterName:t,handleFilterChange:n}=e;return(0,r.jsxs)("div",{children:["filter shown with:",(0,r.jsx)("input",{value:t,onChange:n})]})},u=e=>{let{newName:t,newNum:n,handleNameChange:a,handleNumChange:o,addName:l}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Add new"}),(0,r.jsxs)("form",{onSubmit:l,children:[(0,r.jsxs)("div",{children:["name:",(0,r.jsx)("input",{value:t,onChange:a}),"number:",(0,r.jsx)("input",{value:n,onChange:o})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",children:"add"})})]})]})},i=e=>{let{persons:t,remove:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Numbers"}),t.map(e=>(0,r.jsxs)("div",{children:[e.name," ",e.number,(0,r.jsx)("button",{onClick:()=>n(e.id),children:"DELETE"})]},e.id))]})},c=e=>{let{message:t}=e;return null===t?null:(0,r.jsx)("div",{className:"border border-black-700 rounded-md bg-gray-400 p-2.5 my-2.5 border-solid border-2 text-lg ",children:t.toString()})};var h=()=>{let[e,t]=(0,a.useState)([{name:"yuki",number:123}]),[n,o]=(0,a.useState)(""),[l,h]=(0,a.useState)(""),[m,b]=(0,a.useState)(""),[v,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{s.getAll().then(e=>t(e))},[]);let x=n=>{let r=e.find(e=>e.id===n);r&&window.confirm("".concat(r.name," want to remove?"))&&s.removePerson(n).then(()=>{t(e.filter(e=>e.id!==n))}).catch(e=>window.alert(e))},j=e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase()));return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl",children:"Phonebook"}),(0,r.jsx)(c,{message:v}),(0,r.jsx)(d,{filterName:m,handleFilterChange:e=>{b(e.target.value)}}),(0,r.jsx)(u,{newName:n,newNum:l,handleNameChange:e=>{o(e.target.value)},handleNumChange:e=>{h(e.target.value)},addName:r=>{r.preventDefault();let a={name:n,number:l},d=e.find(e=>e.name.toLowerCase()===a.name.toLowerCase()),u={...d,number:l};d&&d.number===a.number?f("".concat(n," is already added to phonebook")):d&&d.number!==a.number?window.confirm("".concat(n," already in phonebook, do you want to change number"))&&s.update(d.id,u).then(r=>{t(e.map(e=>e.id!==d.id?e:r)),setTimeout(()=>{f("number of ".concat(n," is changed"))},5e3)}).catch(e=>{f("Information of ".concat(n," has already been removed from server")),setTimeout(()=>{f(null)},5e3)}):s.create(a).then(r=>{t(e.concat(r)),f("Successfully added ".concat(n)),setTimeout(()=>{f(null)},5e3)}).catch(e=>{f(e),setTimeout(()=>{f(null)},5e3)}),o(""),h("")}}),(0,r.jsx)(i,{persons:e,remove:x}),(0,r.jsx)("div",{children:"filter results"}),(0,r.jsx)(i,{persons:j,remove:x})]})}}},function(e){e.O(0,[348,253,769,744],function(){return e(e.s=1421)}),_N_E=e.O()}]);