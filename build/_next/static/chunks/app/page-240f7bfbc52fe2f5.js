(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1421:function(e,t,n){Promise.resolve().then(n.bind(n,23))},23:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(9268),r=n(6006),s=n(4214);let l="/api/persons";var o={getAll:()=>{let e=s.Z.get(l);return e.then(e=>e.data)},create:e=>{let t=s.Z.post(l,e);return t.then(e=>e.data)},update:(e,t)=>{let n=s.Z.put("".concat(l,"/").concat(e),t);return n.then(e=>e.data)},removePerson:e=>{let t=s.Z.delete("".concat(l,"/").concat(e));return t.then(e=>e.data)}};let d=e=>{let{filterName:t,handleFilterChange:n}=e;return(0,a.jsxs)("div",{className:"text-md",children:["Filter Person:",(0,a.jsx)("input",{className:" bg-gray-200 ",value:t,onChange:n})]})},c=e=>{let{newName:t,newNum:n,handleNameChange:r,handleNumChange:s,addName:l}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl",children:"Add New Person"}),(0,a.jsxs)("form",{onSubmit:l,children:[(0,a.jsxs)("div",{className:"text-md flex space-x-2",children:["Name:",(0,a.jsx)("input",{className:" bg-gray-200 ",value:t,onChange:r}),"Number:",(0,a.jsx)("input",{className:" bg-gray-200 ",value:n,onChange:s})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"ml-5 bg-green-600 text-md mt-2 rounded p-1",type:"submit",children:"add"})})]})]})},u=e=>{let{persons:t,remove:n}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl",children:"Phone Number List"}),t.map(e=>(0,a.jsxs)("div",{className:"flex",children:[e.name," ",e.number,(0,a.jsx)("button",{onClick:()=>n(e.id),className:"ml-5 bg-red-600 text-xs rounded p-1",children:"DELETE"})]},e.id))]})},m=e=>{let{message:t}=e;return null===t?null:(0,a.jsx)("div",{className:"border border-black-700 rounded-md bg-gray-400 p-2.5 my-2.5 border-solid border-2 text-lg ",children:t.toString()})};var i=()=>{let[e,t]=(0,r.useState)([{name:"yuki",number:123}]),[n,s]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[b,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{o.getAll().then(e=>t(e))},[]);let f=n=>{let a=e.find(e=>e.id===n);a&&window.confirm("".concat(a.name," want to remove?"))&&o.removePerson(n).then(()=>{t(e.filter(e=>e.id!==n))}).catch(e=>window.alert(e))},g=e.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()));return(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("h2",{className:"text-2xl",children:"Phonebook"}),(0,a.jsx)(m,{message:b}),(0,a.jsx)(d,{filterName:h,handleFilterChange:e=>{x(e.target.value)}}),(0,a.jsx)(c,{newName:n,newNum:l,handleNameChange:e=>{s(e.target.value)},handleNumChange:e=>{i(e.target.value)},addName:a=>{a.preventDefault();let r={name:n,number:l},d=e.find(e=>e.name.toLowerCase()===r.name.toLowerCase()),c={...d,number:l};d&&d.number===r.number?N("".concat(n," is already added to phonebook")):d&&d.number!==r.number?window.confirm("".concat(n," already in phonebook, do you want to change number"))&&o.update(d.id,c).then(a=>{t(e.map(e=>e.id!==d.id?e:a)),setTimeout(()=>{N("number of ".concat(n," is changed"))},5e3)}).catch(e=>{N("Information of ".concat(n," has already been removed from server")),setTimeout(()=>{N(null)},5e3)}):o.create(r).then(a=>{t(e.concat(a)),N("Successfully added ".concat(n)),setTimeout(()=>{N(null)},5e3)}).catch(e=>{N("[error] ".concat(e.response.data.error)),setTimeout(()=>{N(null)},5e3)}),s(""),i("")}}),(0,a.jsx)(u,{className:"mt-5",persons:e,remove:f}),(0,a.jsx)("hr",{className:" w-3/4 border-t-4 rounded border-black mx-auto mt-5 "}),(0,a.jsx)("div",{className:"text-2xl",children:"Filtered Results"}),(0,a.jsx)(u,{persons:g,remove:f})]})}}},function(e){e.O(0,[348,253,769,744],function(){return e(e.s=1421)}),_N_E=e.O()}]);